<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="plantsalespottags" language="groovy" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="752" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="44c3693e-8db2-4be6-ba98-e4a79ffdc25b">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<queryString>
		<![CDATA[select row_number() over (order by pc.id) label_id,
co1.objectnumber accession_number,
case
  when taxonname is not null and family is not null then getdispl(taxonname)||' '||getdispl(family)
  when taxonname is not null and family is null then getdispl(taxonname)
  when taxonname is null and family is not null then getdispl(family)
end as taxon_data,
commonname common_name,
locale country_name,
labeldata label_data,
numberoflabels quantity,
printlabels label_req_flag,
createdby staff_logon,
date(createdat) date_entered,
updatedby last_change_staff_logon,
date(updatedat) last_change_date

from pottags_common pc

left outer join hierarchy h1 on pc.id=h1.id
left outer join relations_common r1 on (h1.name=r1.subjectcsid and objectdocumenttype='CollectionObject')
left outer join hierarchy h2 on (r1.objectcsid=h2.name)
left outer join collectionobjects_common co1 on (co1.id=h2.id)

join collectionspace_core core on (core.id=pc.id and core.tenantid=35)
join misc misc1 on (misc1.id = pc.id and misc1.lifecyclestate <> 'deleted')
left outer join misc misc2 on (misc2.id = co1.id and misc2.lifecyclestate <> 'deleted')

where pc.printlabels = 'yes'

order by label_id]]>
	</queryString>
	<field name="label_id" class="java.lang.Long"/>
	<field name="accession_number" class="java.lang.String"/>
	<field name="taxon_data" class="java.lang.String"/>
	<field name="common_name" class="java.lang.String"/>
	<field name="country_name" class="java.lang.String"/>
	<field name="label_data" class="java.lang.String"/>
	<field name="quantity" class="java.lang.Long"/>
	<field name="label_req_flag" class="java.lang.String"/>
	<field name="staff_logon" class="java.lang.String"/>
	<field name="date_entered" class="java.sql.Date"/>
	<field name="last_change_staff_logon" class="java.lang.String"/>
	<field name="last_change_date" class="java.sql.Date"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="38" splitType="Stretch">
			<staticText>
				<reportElement uuid="82c06e81-50bf-44a4-928e-6fb10701b9f2" stretchType="RelativeToTallestObject" x="0" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[label_id]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="838b8248-c89a-4c3c-8ca1-d6bf41871bbe" stretchType="RelativeToTallestObject" x="45" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[accession_number]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="e552d759-7e3a-4bf1-b9e5-36be7e428da9" stretchType="RelativeToTallestObject" x="90" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[taxon_data]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="3feeaf99-0997-4b31-9781-195c631b97ac" stretchType="RelativeToTallestObject" x="135" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[common_name]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="e237e49f-b598-4994-997c-4db2beb4f7d9" stretchType="RelativeToTallestObject" x="182" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[country_name]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="4ccf9e53-8a8b-494c-b019-b426b706a4bf" stretchType="RelativeToTallestObject" x="227" y="0" width="60" height="38"/>
				<textElement/>
				<text><![CDATA[label_data]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="eecb1da8-09f7-4896-a6cb-77fcf6b20ff4" stretchType="RelativeToTallestObject" x="480" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[quantity]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="f59bb802-7b32-4a4b-a5fe-4bc8f9a584be" stretchType="RelativeToTallestObject" x="525" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[label_req_flag]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="83b464b5-ed7f-44da-b19b-867a0474d3ac" stretchType="RelativeToTallestObject" x="570" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[staff_logon]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="a4c18d62-9f15-4717-a0d9-8d4fa79bd34c" stretchType="RelativeToTallestObject" x="615" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[date_entered]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="98bbdd22-dd9f-474a-98f5-8157e463ce3c" stretchType="RelativeToTallestObject" x="660" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[last_change_staff_logon]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="37fc668a-22c3-4011-abc5-aa98ef449f79" stretchType="RelativeToTallestObject" x="705" y="0" width="45" height="38"/>
				<textElement/>
				<text><![CDATA[last_change_date]]></text>
			</staticText>
		</band>
	</title>
	<detail>
		<band height="22" splitType="Prevent">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="ac723663-cf71-4e4b-bf79-3903aba5f5cf" x="0" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{label_id}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="104e354a-9032-4e9e-9980-5a6c09b99f1a" x="45" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{accession_number}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="11775cd8-4648-42e7-87fc-218cb320504a" x="90" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{taxon_data}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="6f33c0cf-930d-4b64-8c53-c3569a692a99" x="135" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{common_name}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="91b05204-4fb4-44d3-b0ec-bb33bc74e4fc" x="182" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{country_name}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="ae0d6c4d-1578-42ab-92ff-0eedf0370e20" x="227" y="0" width="253" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{label_data}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="bc6eb07b-b23e-4198-9ea3-ff9fd9ca273c" x="480" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{quantity}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="90d02b88-7dd1-4e09-a91d-709a8998078b" x="525" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{label_req_flag}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="cff6900f-b5d3-45d1-8393-30a69f466c8d" x="570" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{staff_logon}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="MM/dd/yyyy" isBlankWhenNull="true">
				<reportElement uuid="3eb7b2d6-b855-49e8-94bb-c9bc69064403" x="615" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{date_entered}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement uuid="c63f8319-9292-4df4-b7c0-15363701ff85" x="660" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{last_change_staff_logon}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="MM/dd/yyyy" isBlankWhenNull="true">
				<reportElement uuid="3e474620-eb5e-47a6-9e00-ed25cf8e7df9" x="705" y="0" width="45" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$F{last_change_date}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
